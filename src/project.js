window.__require=function e(t,i,o){function c(s,a){if(!i[s]){if(!t[s]){var r=s.split("/");if(r=r[r.length-1],!t[r]){var h="function"==typeof __require&&__require;if(!a&&h)return h(r,!0);if(n)return n(r,!0);throw new Error("Cannot find module '"+s+"'")}}var l=i[s]={exports:{}};t[s][0].call(l.exports,function(e){return c(t[s][1][e]||e)},l,l.exports,e,t,i,o)}return i[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<o.length;s++)c(o[s]);return c}({action:[function(e,t,i){"use strict";cc._RF.push(t,"9d3711KFVFCZ6a/86BjU5eU","action"),t.exports={shackAction:function(e,t){var i=cc.moveBy(e,t,t),o=cc.moveBy(e,-t,-t),c=cc.moveBy(.8*e,.8*t,.8*t),n=cc.moveBy(.8*e,.8*-t,.8*-t),s=cc.moveBy(.6*e,.6*t,.6*t),a=cc.moveBy(.6*e,.6*-t,.6*-t),r=cc.moveBy(.4*e,.4*t,.4*t),h=cc.moveBy(.4*e,.4*-t,.4*-t),l=cc.moveBy(.2*e,.2*t,.2*t),u=cc.moveBy(.2*e,.2*-t,.2*-t);return cc.sequence(i,o,c,n,s,a,r,h,l,u)},blinkAction:function(e){return cc.repeatForever(cc.sequence(cc.fadeOut(e),cc.fadeIn(e)))},pageTurning:function(e,t,i){switch(i){case 0:e.runAction(cc.fadeOut(.6)),t.runAction(cc.delayTime(.6),cc.fadeIn(.6),cc.sequence(cc.callFunc(function(){e.active=!1},this,e)));break;case 1:t.scaleX=0,e.runAction(cc.scaleTo(.6,0,1)),t.runAction(cc.sequence(cc.delayTime(.6),cc.callFunc(function(){e.active=!1},this,e),cc.scaleTo(.6,1,1)))}},heartBeat:function(){cc.scaleTo(.2,1.2).easing(cc.easeElasticInOut()),cc.scaleTo(.2,1).easing(cc.easeElasticInOut()),cc.rotateTo(.1,45),cc.rotateTo(.2,-45),cc.rotateTo(.1,0)},getMoveOutofScreenActive:function(e,t,i,o){switch(e){case 0:return cc.moveBy(o,0,i);case 1:return cc.moveBy(o,t,0);case 2:return cc.moveBy(o,0,-i);case 3:return cc.moveBy(o,-t,0)}},popOut:function(e){return cc.scaleTo(e,1).easing(cc.easeBackOut(2))},popIn:function(e){return cc.scaleTo(e,.5).easing(cc.easeBackIn(2))},getMoveInScreenActive:function(e,t,i,o){switch(e){case 0:return cc.moveBy(o,0,-i);case 1:return cc.moveBy(o,-t,0);case 2:return cc.moveBy(o,0,i);case 3:return cc.moveBy(o,t,0)}},rockAction:function(e,t){var i=cc.rotateBy(e,t,t),o=cc.rotateBy(e,-2*t,-2*t),c=cc.rotateBy(.8*e,2*t*.8,2*t*.8),n=cc.rotateBy(.6*e,-2*t*.6,-2*t*.6),s=cc.rotateBy(.4*e,2*t*.4,2*t*.4),a=cc.rotateTo(.2*e,0,0);return cc.sequence(i,o,c,n,s,a)}},cc._RF.pop()},{}],building:[function(e,t,i){"use strict";cc._RF.push(t,"398fcZTj9dDiob4+zBV4owr","building"),cc.Class({extends:cc.Component,properties:{},init:function(){}}),cc._RF.pop()},{}],cell:[function(e,t,i){"use strict";cc._RF.push(t,"dbc3cQxtHpPj77TncyB18gQ","cell"),cc.Class({extends:cc.Component,properties:{_status:0,_itemType:0,warningSprite:cc.Sprite,lightSprite:cc.Sprite},init:function(e,t,i,o,c){this._game=e,this._status=1,c=c||{x:t.x,y:t.y},this._itemType=o||0,this.warningType=0,this.isPush=!1,this.bindEvent(),this.color=t.color||Math.ceil(4*Math.random()),this.colorSprite=this.node.getChildByName("color").getComponent(cc.Sprite),this.colorSprite.spriteFrame=o?e.propSpriteFrame[4*(o-1)+this.color-1]:this._game.blockSprite[this.color-1],this.warningSprite.spriteFrame="",this._width=i,this._controller=e._controller,this.lightSprite.node.active=!1,this.node.width=this.node.height=i,this.startTime=t.startTime,this.iid=t.y,this.jid=t.x,this.node.x=-(365-e.gap-i/2)+c.x*(i+e.gap),this.node.y=365-e.gap-i/2-c.y*(i+e.gap),this.node.rotation=0,this.playStartAction()},changeItemType:function(e){this._itemType=e,this.colorSprite.spriteFrame=e?this._game.propSpriteFrame[4*(e-1)+this.color-1]:this._game.blockSprite[this.color-1]},onWarning:function(e){this.warningSprite.spriteFrame=this._game.warningSpriteFrame[e-1]||"",this.warningType=e;cc.blink(1,10)},warningInit:function(){this.warningSprite.spriteFrame="",this.isPush=!1},growInit:function(){this.growType=0,this.colorSprite.node.height=this.colorSprite.node.width=this._width,this.colorSprite.node.y=this.colorSprite.node.x=0},grow:function(e){switch(e){case 1:2!=this.growType&&(this.colorSprite.node.height+=2*this._game.gap,this.colorSprite.node.y+=this._game.gap,this.growType=1);break;case 2:2!=this.growType&&(this.colorSprite.node.height+=2*this._game.gap,this.colorSprite.node.y-=this._game.gap,this.growType=1);break;case 3:1!=this.growType&&(this.colorSprite.node.width+=2*this._game.gap,this.colorSprite.node.x-=this._game.gap,this.growType=2);break;case 4:1!=this.growType&&(this.colorSprite.node.width+=2*this._game.gap,this.colorSprite.node.x+=this._game.gap,this.growType=2)}},bindEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouched,this)},onTouched:function(e,t,i,o){var c=this;if(o)setTimeout(function(){c.onTouched(e,!1,i)},o);else{t="null"==JSON.stringify(t)||t,i=i||!1,e=e||this.color;if(1==this._status&&1==i)return this._status=2,void this.playDieAction().then(function(){c.onBlockPop(e,t,i)});if(e.type){if(this.isSingle&&this._itemType<=1){this.node.scale=1,this._game._score.tipBox.init(this._game._score,3);var n=cc.scaleTo(.1,1.1,.9),s=cc.scaleTo(.3,1).easing(cc.easeBackOut(2)),a=cc.sequence(n,s);return void this.node.runAction(a)}e=this.color,1==this._status&&1==this._game._status&&this.color==e&&(this._game.onUserTouched(this.iid,this.jid,this._itemType,this.color,this.warningType,{x:this.node.x,y:this.node.y}),this._game._score.onStep(-1).then(function(t){t&&c.playDieAction().then(function(){c.onBlockPop(e,null,null)})}))}else 1==this._status&&5==this._game._status&&this.color==e&&this.playDieAction().then(function(){c.onBlockPop(e,null,null)})}},onBlockPop:function(e,t,i){t="null"==JSON.stringify(t)||t,i=i||!1,this._game.checkNeedFall(),this._game._status=5,this._controller.musicMgr.onPlayAudio(0),0!=this._itemType&&this._game.onItem(this._itemType,this.color,{x:this.node.x,y:this.node.y}),this._game._score.addScore(cc.v2(this.node.x,this.node.y-this.node.width+this._game.gap),3==this._itemType?this._game._controller.config.json.propConfig[2].score:null),t&&(this.iid-1>=0&&this._game.map[this.iid-1][this.jid].getComponent("cell").onTouched(e),this.iid+1<this._game.rowNum&&this._game.map[this.iid+1][this.jid].getComponent("cell").onTouched(e),this.jid-1>=0&&this._game.map[this.iid][this.jid-1].getComponent("cell").onTouched(e),this.jid+1<this._game.rowNum&&this._game.map[this.iid][this.jid+1].getComponent("cell").onTouched(e))},playFallAction:function(e,t){var i=this;this._status=0,t&&(this.iid=t.y,this.jid=t.x);var o=cc.moveBy(.25,0,-e*(this._game.gap+this._game.blockWidth)).easing(cc.easeBounceOut(5/e)),c=cc.sequence(o,cc.callFunc(function(){i._status=1},this));this.node.runAction(c)},playStartAction:function(){var e=this;this.node.scaleX=0,this.node.scaleY=0;var t=cc.scaleTo(.8/this._game.animationSpeed,1,1).easing(cc.easeBackOut()),i=cc.sequence(t,cc.callFunc(function(){e._status=1},this));this.startTime?setTimeout(function(){e.node.runAction(i)},this.startTime/1):this.node.runAction(i)},playDieAction:function(){var e=this,t=this;return clearTimeout(this.surfaceTimer),this.node.stopAllActions(),this._status=2,this.node.scaleX=1,this.node.scaleY=1,new Promise(function(i,o){var c=void 0;if(e.warningSprite.spriteFrame)var n=cc.scaleTo(.2/t._game.animationSpeed,1.1),s=cc.moveTo(.2/t._game.animationSpeed,e._game.target.x,e._game.target.y),a=cc.scaleTo(.2,0),r=cc.sequence(n,cc.callFunc(function(){i("")},e),cc.spawn(s,a));else{c=cc.scaleTo(.2/t._game.animationSpeed,0,0);r=cc.sequence(c,cc.callFunc(function(){i("")},e))}t.node.runAction(r)})},surfaceAction:function(e){var t=this;this.surfaceTimer=setTimeout(function(){var e=cc.scaleTo(.4/t._game.animationSpeed,.8,.8),i=cc.scaleTo(.4/t._game.animationSpeed,1,1);t.node.runAction(cc.sequence(e,i))},e)},generatePropAction:function(){},generateItem:function(e){this._itemType=e}}),cc._RF.pop()},{}],character:[function(e,t,i){"use strict";cc._RF.push(t,"33cd23uZ6JD4pTLpKtgjbbS","character"),cc.Class({extends:cc.Component,properties:{levelUp1:cc.Node,levelUp2:cc.Node,character:cc.Node,fail:cc.Node,dbArray:[dragonBones.DragonBonesAsset],textureArr:[dragonBones.DragonBonesAtlasAsset]},start:function(){this.loadRes()},loadRes:function(){for(var e=this,t=function(t){var i="db/sanxiao"+(t+1)+"_ske",o="db/sanxiao"+(t+1)+"_tex";cc.loader.loadRes(i,dragonBones.DragonBonesAsset,function(i,o){e.dbArray[t]=o}),cc.loader.loadRes(o,dragonBones.DragonBonesAtlasAsset,function(i,o){e.textureArr[t]=o})},i=0;i<15;i++)t(i)},onWalk:function(e){e.playAnimation("walk",-1)},onLevelUp:function(){},onSuccessDialog:function(e){this.showCharacter(e,this.levelUp2,!0)},onLevelUpBtn:function(e){this.showCharacter(e)},onFail:function(e){this.showCharacter(e,this.fail)},initStartPage:function(){},showCharacter:function(e,t,i){(t=t||this.character).getComponent(dragonBones.ArmatureDisplay).destroy();var o=t.addComponent(dragonBones.ArmatureDisplay);o.dragonAsset=this.dbArray[e-1],o.dragonAtlasAsset=this.textureArr[e-1],o.armatureName="Armature",o.timeScale=.5,o.playAnimation(i?"jump":"walk",-1)}}),cc._RF.pop()},{}],check:[function(e,t,i){"use strict";cc._RF.push(t,"a3721/aOY1GFrIWHHBzYGsi","check"),cc.Class({extends:cc.Component,properties:{groups:[],map:[],mapLength:8},init:function(e){this._game=e,this.map=e.map,this.mapLength=e.rowNum;for(var t=0;t<this.mapLength;t++){this.groups[t]=[];for(var i=0;i<this.mapLength;i++)this.map[t][i],this.map[t][i].getComponent("cell").isSingle=!1,this.map[t][i].getComponent("cell").warningInit(),this.groups[t][i]=[]}},check:function(e){var t=e._controller.config.json.propConfig;this._game=e,this.map=e.map,this.mapLength=e.rowNum;for(var i=999,o=0;o<t.length;o++)i=t[o].min<i?t[o].min:i;for(var c=0;c<this.mapLength;c++)for(var n=0;n<this.mapLength;n++){this.pushPop(this.map[c][n],c,n);var s=this.map[c][n],a=s.getComponent("cell").iid,r=s.getComponent("cell").jid,h=!0;if(a-1>=0&&this.map[a-1][r].getComponent("cell").color==s.getComponent("cell").color&&(h=!1),a+1<this.mapLength&&this.map[a+1][r].getComponent("cell").color==s.getComponent("cell").color&&(h=!1),r-1>=0&&this.map[a][r-1].getComponent("cell").color==s.getComponent("cell").color&&(h=!1),r+1<this.mapLength&&this.map[a][r+1].getComponent("cell").color==s.getComponent("cell").color&&(h=!1),this.map[c][n].getComponent("cell").isSingle=h,this.groups[c][n].length>=i)for(var l=0;l<t.length;l++)this.groups[c][n].length<=t[l].max&&this.groups[c][n].length>=t[l].min&&this.warning(t[l].type,this.groups[c][n])}},pushPop:function(e,t,i){e.getComponent("cell").isPush=!0,this.groups[t][i].push(e);var o=e.getComponent("cell").iid,c=e.getComponent("cell").jid;o-1>=0&&(this.map[o-1][c].getComponent("cell").isPush||this.map[o-1][c].getComponent("cell").color!=e.getComponent("cell").color||this.pushPop(this.map[o-1][c],t,i)),o+1<this.mapLength&&(this.map[o+1][c].getComponent("cell").isPush||this.map[o+1][c].getComponent("cell").color!=e.getComponent("cell").color||this.pushPop(this.map[o+1][c],t,i)),c-1>=0&&(this.map[o][c-1].getComponent("cell").isPush||this.map[o][c-1].getComponent("cell").color!=e.getComponent("cell").color||this.pushPop(this.map[o][c-1],t,i)),c+1<this.mapLength&&(this.map[o][c+1].getComponent("cell").isPush||this.map[o][c+1].getComponent("cell").color!=e.getComponent("cell").color||this.pushPop(this.map[o][c+1],t,i))},warning:function(e,t){t.map(function(t){t.getComponent("cell").onWarning(e)})}}),cc._RF.pop()},{}],controller:[function(e,t,i){"use strict";cc._RF.push(t,"feefcb/VXtFp4L+Zqa6CrBZ","controller"),cc.Class({extends:cc.Component,properties:{musicMgr:e("musicMgr"),game:e("game"),pageMgr:e("pageMgr"),social:e("social"),config:cc.JsonAsset,gameData:cc.JsonAsset,scoreMgr:e("score"),totalRank:cc.Node,groupRank:cc.Node,startPage:e("startPage"),navNode:cc.Node,pictorial:cc.Node,helpPage:cc.Node},start:function(){this.totalRank.active=!1,this.pictorial.active=!1,this.game.init(this),this.social.node.active&&this.social.init(this),this.musicMgr.init(),this.lateStart()},lateStart:function(){this.social.node.active&&this.social.closeBannerAdv(),this.game._status=0,this.pictorial.getComponent("pictorial").init(this),this.startPage.bannerNode.scale=1,this.pageMgr.onOpenPage(0)},onGameStartButton:function(){var e=this;this.social.node.active&&this.social.openBannerAdv(),this.startPage.showAnimation().then(function(){e.gameStart()})},gameStart:function(){this.pageMgr.onOpenPage(1),this.game.gameStart()},closeRank:function(){this.totalRank.active=!1,this.navNode.active=!0,this.social.node.active&&this.social.closeRank()},openRank:function(){this.totalRank.active=!0,this.navNode.active=!1,this.social.node.active&&this.social.showRank()},openGroupRank:function(){this.groupRank.active=!0,this.social.node.active&&(this.social.showGroupRank(),this.pageMgr.addPage(6))},closeGroupRank:function(){this.groupRank.active=!1,this.navNode.active=!0,this.social.node.active&&(this.social.closeGroupRank(),this.pageMgr.removePage(6))},openPictorial:function(){this.pictorial.active=!0},closePictorial:function(){this.pictorial.active=!1},openHelpPage:function(){this.pageMgr.addPage(2),this.helpPage.active=!0},closeHelpPage:function(){this.pageMgr.removePage(2),this.helpPage.active=!1}}),cc._RF.pop()},{game:"game",musicMgr:"musicMgr",pageMgr:"pageMgr",score:"score",social:"social",startPage:"startPage"}],game:[function(e,t,i){"use strict";cc._RF.push(t,"47c77yOeKpPiJVINXipHohs","game");var o=e("action");cc.Class({extends:cc.Component,properties:{_status:0,blockPrefab:cc.Prefab,blockSprite:[cc.SpriteFrame],warningSpriteFrame:[cc.SpriteFrame],propSpriteFrame:[cc.SpriteFrame],checkMgr:e("check"),revivePage:cc.Node,tutorialNode:cc.Node,shareBtn:cc.Node,shareSuccessDialog:cc.Node},start:function(){this.bindNode(),this.generatePool(),this.loadRes()},loadRes:function(){},init:function(e){this._controller=e,this._score=e.scoreMgr,this.rowNum=e.config.json.rowNum,this.gap=e.config.json.gap,this.animationSpeed=e.config.json.gap,this.blockWidth=(730-(this.rowNum+1)*this.gap)/this.rowNum,this.reviveTimer=null,this.tutorialNode.active=!1,this.isWeChat=this._controller.social.node.active,this.shareSuccessDialog.active=!1},bindNode:function(){this.blocksContainer=this.node.getChildByName("map")},gameStart:function(){var e=this;this.recoveryAllBlocks().then(),this.shareBtn.active=!0,this.isWeChat&&(this._controller.social.hasShared=!1),this._score.init(this);this.isFirstTime()?this.mapSet(this.rowNum,[[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[4,2,3,4,2,2,3,4]]).then(function(t){e.showTutorial(e.map[1][4],"\u70b9\u51fb\u8fde\u7eed\u7684\u533a\u57df\u751f\u6210\u70b8\u5f39\u9e2d"),e.tutorialProgress=1,e._status=1}):this.mapSet(this.rowNum).then(function(t){e._status=1})},showTutorial:function(e,t){this.tutorialNode.active=!0,this.tutorialNode.getChildByName("targetBtn").getChildByName("sqr").runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,.8),cc.scaleTo(.3,1.2)))),this.tutorialNode.getChildByName("target").x=e.x,this.tutorialNode.getChildByName("target").y=e.y,this.tutorialNode.getChildByName("targetBtn").x=e.x,this.tutorialNode.getChildByName("targetBtn").y=e.y,this.tutorialNode.getChildByName("label").getChildByName("label").getComponent(cc.Label).string=t},closeTutorial:function(){var e=this;this.tutorialNode.getChildByName("targetBtn").getChildByName("sqr").stopAllActions(),this.tutorialNode.active=!1,this._status=1,this.map[1][4].getComponent("cell").onTouched({type:1},!1,!1),1==this.tutorialProgress&&setTimeout(function(){e.showTutorial(e.map[1][4],"\u70b9\u51fb\u70b8\u5f39\u6d88\u9664\u6240\u6709\u540c\u8272\u65b9\u5757\u54e6"),e.tutorialProgress=2},1e3)},isFirstTime:function(){var e=!1;return this.isWeChat&&!wx.getStorageSync("isFirst")?(wx.setStorageSync("isFirst","1"),e=!0):cc.sys.localStorage.getItem("isFirst")||(cc.sys.localStorage.setItem("isFirst","1"),e=!0),e},onItemShare:function(){this.isWeChat?this._controller.social.onItemShareButton():this.fakeShareSuccess()},onItemAdv:function(){this.isWeChat?this._controller.social.onReviveButton(2):this.fakeShareSuccess()},fakeShareSuccess:function(){this.shareBtn.active=!1,this.shareSuccessDialog.active=!0},onCreateBomb:function(){var e=Math.floor(8*Math.random()),t=Math.floor(8*Math.random());this.shareSuccessDialog.active=!1,0==this.map[e][t].getComponent("cell")._itemType?this.map[e][t].getComponent("cell").changeItemType(2):this.onCreateBomb()},mapSet:function(e,t){var i=this;this.map=new Array;var o=this,c=Math.floor(Math.random()*e),n=Math.floor(Math.random()*e),s=Math.floor(1+Math.random()*(e-1))-1;c==s&&s++;var a=Math.floor(Math.random()*e);return this.tutorialPos=[s,a],new Promise(function(r,h){for(var l=0;l<e;l++){i.map[l]=new Array;for(var u=0;u<e;u++){var p=l==c&&u==n?1:l==s&&u==a?t?1:2:0;o.map[l][u]=o.instantiateBlock(o,{x:u,y:l,color:t&&t[l]?t[l][u]:null,width:o.blockWidth,startTime:(l+u+1)*o._controller.config.json.startAnimationTime/e*2},o.blocksContainer,p)}}i.checkMgr.init(i),setTimeout(function(){r("200 OK"),i.checkMgr.check(i)},o._controller.config.json.startAnimationTime*e/2/1)})},checkNeedFall:function(){var e=this;this.checkNeedFallTimer&&clearTimeout(this.checkNeedFallTimer),this.checkNeedFallTimer=setTimeout(function(){5==e._status&&(e._status=4,e.onFall())},300)},onFall:function(){var e=this;this.checkGenerateProp(this._score.chain).then(function(){for(var t=0,i=e.rowNum-1;i>=0;i--){t=0;for(var o=e.rowNum-1;o>=0;o--)2==e.map[o][i].getComponent("cell")._status?(e.blockPool.put(e.map[o][i]),e.map[o][i]=null,t++):0!=t&&(e.map[o+t][i]=e.map[o][i],e.map[o][i]=null,e.map[o+t][i].getComponent("cell").playFallAction(t,{x:i,y:o+t}));for(var c=0;c<t;c++)e.map[c][i]=e.instantiateBlock(e,{x:i,y:c,width:e.blockWidth,startTime:null},e.blocksContainer,"",{x:i,y:-t+c}),e.map[c][i].getComponent("cell").playFallAction(t,null)}setTimeout(function(){e.checkMgr.init(e),e.checkMgr.check(e),e._status=1},250)})},gameOver:function(){this._status=3,this._controller.pageMgr.addPage(2),this._controller.pageMgr.addPage(4),this._controller.social.node.active&&this._controller.social.closeBannerAdv()},askRevive:function(){var e=this;this._controller.pageMgr.addPage(2),this._controller.pageMgr.addPage(5),this.revivePage.active=!0,this.revivePage.getChildByName("askRevive").active=!0,this.revivePage.getChildByName("successRevive").active=!1,this.rangeSprite=this.revivePage.getChildByName("askRevive").getChildByName("numBg").getChildByName("sprite").getComponent(cc.Sprite),this.rangeSprite.fillRange=1,this.isRangeAction=!0;var t=this.revivePage.getChildByName("askRevive").getChildByName("numBg").getChildByName("num").getComponent(cc.Label);t.string=9,this.reviveTimer&&clearInterval(this.reviveTimer),this.reviveTimer=setInterval(function(){+t.string>0?(t.string--,e.rangeSprite.fillRange=1):e.onSkipRevive()},1e3)},onReviveButton:function(){clearInterval(this.reviveTimer),this.isRangeAction=!1,this._controller.social.node.active?this._controller.social.onReviveButton(1):this.showReviveSuccess()},showReviveSuccess:function(){this.revivePage.getChildByName("askRevive").active=!1,this.revivePage.getChildByName("successRevive").active=!0},onReviveCertainBtn:function(){this._controller.pageMgr.removePage(2),this.revivePage.active=!1,this._status=1,this._score.onRevive()},update:function(){this.isRangeAction&&(this.rangeSprite.fillRange-=1/60)},onSkipRevive:function(){clearInterval(this.reviveTimer),this._controller.pageMgr.pages[5].active=!1,this._score.onGameOver(!0),this.isRangeAction=!1},restart:function(){var e=this;this._controller.pageMgr.onOpenPage(1),this.recoveryAllBlocks().then(function(){e.gameStart()})},onUserTouched:function(e,t,i,o,c,n){this.target={i:e,j:t,color:o,itemType:i,x:n.x,y:n.y,warning:c}},generatePropItem:function(e){var t=this;return new Promise(function(i,o){t.map[t.target.i][t.target.j]=t.instantiateBlock(t,{x:t.target.j,y:t.target.i,color:t.target.color,width:t.blockWidth,startTime:null},t.blocksContainer,e),setTimeout(function(){i()},300)})},checkGenerateProp:function(e){var t=this;return new Promise(function(e,i){t.target&&t.target.warning&&t.generatePropItem(t.target.warning).then(function(){e()}),e()})},onItem:function(e,t,i){switch(e){case 1:this._score.tipBox.init(this._score,1),this._score.addMult(t,i),this._controller.musicMgr.onDouble();for(var c=0;c<this.rowNum;c++)for(var n=0;n<this.rowNum;n++)if(this.map[c][n]&&1==this.map[c][n].getComponent("cell")._status){var s=Math.sqrt(Math.pow(i.x-this.map[c][n].x,2)+Math.pow(i.y-this.map[c][n].y,2));0!=s&&this.map[c][n].getComponent("cell").surfaceAction(s)}break;case 2:this._score.tipBox.init(this._score,2),this.node.runAction(o.shackAction(.1,10)),this._controller.social.node.active&&this._controller.social.onShakePhone(),this.isPropChain=!0,this._controller.musicMgr.onBoom();for(var a=0;a<this.rowNum;a++)for(var r=0;r<this.rowNum;r++)this.map[a][r]&&this.map[a][r].getComponent("cell").color==t&&this.map[a][r]&&2!=this.map[a][r].getComponent("cell")._status?this.map[a][r].getComponent("cell").onTouched(t,!1,!0):this.map[a][r].runAction(o.rockAction(.2,10));break;case 3:this._score.tipBox.init(this._score,4),this._controller.musicMgr.onDouble();for(var h=0;h<this.rowNum;h++)for(var l=0;l<this.rowNum;l++)if(this.map[h][l]&&1==this.map[h][l].getComponent("cell")._status){var u=Math.sqrt(Math.pow(i.x-this.map[h][l].x,2)+Math.pow(i.y-this.map[h][l].y,2));0!=u&&this.map[h][l].getComponent("cell").surfaceAction(u)}this._score.onStep(3).then();break;case 4:this._score.tipBox.init(this._score,5),this.isPropChain=!0,this._controller.musicMgr.onMagic();for(var p=0;p<this.rowNum;p++)for(var g=0;g<this.rowNum;g++)if(this.map[p][g]&&this.map[p][g].getComponent("cell").isSingle&&this.map[p][g]&&2!=this.map[p][g].getComponent("cell")._status){var m=Math.sqrt(Math.pow(i.x-this.map[p][g].x,2)+Math.pow(i.y-this.map[p][g].y,2));this.map[p][g].getComponent("cell").onTouched(t,!1,!0,m)}}},generatePool:function(){this.blockPool=new cc.NodePool;for(var e=0;e<Math.pow(this.rowNum,2);e++){var t=cc.instantiate(this.blockPrefab);this.blockPool.put(t)}},instantiateBlock:function(e,t,i,o,c){o=o||0;var n=null;return(n=e.blockPool&&e.blockPool.size()>0?e.blockPool.get():cc.instantiate(e.blockPrefab)).parent=i,n.scale=1,n.x=0,n.y=0,n.getComponent("cell").init(e,t,this.blockWidth,o,c),n},recoveryAllBlocks:function(){var e=this;return new Promise(function(t,i){var o=e.blocksContainer.children;if(0!=o.length){for(var c=o.length,n=0;n<c;n++)e.blockPool.put(o[0]);for(var s=0;s<e.rowNum;s++)for(var a=0;a<e.rowNum;a++)e.map[s][a]=null}t("")})}}),cc._RF.pop()},{action:"action",check:"check"}],musicMgr:[function(e,t,i){"use strict";cc._RF.push(t,"0fd3emgDv1Pc6rR7NiVJ4q/","musicMgr"),cc.Class({extends:cc.Component,properties:{volume:1,audios:[cc.AudioSource],audioPrefab:cc.Prefab,bgMusic:cc.AudioSource,winAudio:cc.AudioSource,doubleAudio:cc.AudioSource,boomAudio:cc.AudioSource,magicAudio:cc.AudioSource},init:function(){this.audio=[],this.instanceAudio(),this.createMusicPool()},createMusicPool:function(){},instanceAudio:function(){},changeVol:function(e){var t=this;this.volume=e,this.audios.forEach(function(i,o){t.audios[o].volume=e})},onPlayAudio:function(e){if(!this.audios[e]||this.audios[e].isPlaying)if(this.audios[e+1])this.onPlayAudio(e+1);else{var t=null;(t=this.musicPool&&this.musicPool.size()>0?this.musicPool.get():cc.instantiate(this.audioPrefab)).parent=this.node,this.audios[e+1]=t.getComponent(cc.AudioSource),t.getComponent(cc.AudioSource).play()}else this.audios[e].rewind(),this.audios[e].play()},pauseBg:function(){this.bgMusic.pause()},resumeBg:function(){this.bgMusic.resume()},start:function(){},checkBg:function(){},onWin:function(){this.winAudio.rewind(),this.winAudio.play()},onDouble:function(){this.doubleAudio.rewind(),this.doubleAudio.play()},onBoom:function(){this.boomAudio.rewind(),this.boomAudio.play()},onMagic:function(){this.magicAudio.rewind(),this.magicAudio.play()}}),cc._RF.pop()},{}],pageMgr:[function(e,t,i){"use strict";cc._RF.push(t,"a1bb7xaDvtHXLTuIo0MRIEu","pageMgr");var o=e("action");cc.Class({extends:cc.Component,properties:{status:0,pages:[cc.Node]},start:function(){this.lateStart()},lateStart:function(){this.width=cc.winSize.width,window.width=this.width,this.height=cc.winSize.height,window.height=this.height,this.adoptCanvas()},adoptCanvas:function(){var e=cc.director.getScene().getChildByName("Canvas").getComponent(cc.Canvas),t=e.designResolution.height/e.designResolution.width;this.height/this.width>t?(e.fitHeight=!1,e.fitWidth=!0):(e.fitHeight=!0,e.fitWidth=!1)},onOpenPage:function(e,t){this.closeAllPages(),this.pages[e].active=!0},addPage:function(e,t){this.pages[e].scale=.5,this.pages[e].active=!0,this.pages[e].runAction(o.popOut(.5))},openPageTarget:function(e){e.scale=.5,e.active=!0,e.runAction(o.popOut(.5))},removePage:function(e,t){var i=this;this.pages[e].runAction(cc.sequence(o.popIn(.5),cc.callFunc(function(){i.pages[e].active=!1},this)))},onButtonOpenPage:function(e,t){this.onOpenPage(t)},onButtonAddPage:function(e,t){this.addPage(t)},onButtonRemovePage:function(e,t){this.removePage(t)},closeAllPages:function(){this.pages.forEach(function(e){e.active=!1})}}),cc._RF.pop()},{action:"action"}],pictorial:[function(e,t,i){"use strict";cc._RF.push(t,"0e40bxKGytLiJwQbi3sCcB6","pictorial"),cc.Class({extends:cc.Component,properties:{container:cc.Node,avatar:cc.Node,prefab:cc.Prefab},init:function(e){if(this._controller=e,e.social.node.active){var t=e.social.getHighestLevel();t?(this.showAvatar(t),this.loadContainer(+t)):(this.avatar.active=!1,this.loadContainer(1))}else this.avatar.active=!1},showAvatar:function(e){var t=this;this.avatar.active=!0;var i=this._controller.gameData.json.levelData[+e-1],o=this._controller.social.getHighestScore();this.avatar.getChildByName("name").getComponent(cc.Label).string="\u5386\u53f2\u6700\u9ad8:"+i.name,this.avatar.getChildByName("score").getComponent(cc.Label).string="\u5206\u6570"+o,setTimeout(function(){t._controller.scoreMgr.characterMgr.showCharacter(+e,t.avatar.getChildByName("db"),!1)},1e3)},loadContainer:function(e){var t=this,i=this._controller.gameData.json.levelData;this.clearContainer(),setTimeout(function(){for(var o=0;o<i.length;o++){var c=cc.instantiate(t.prefab);c.parent=t.container,t.initCard(c,i[o],o,e)}},1e3)},clearContainer:function(){this.container.children.map(function(e){e.destroy()})},initCard:function(e,t,i,o){i<o?(e.getChildByName("name").getComponent(cc.Label).string=t.name,e.getChildByName("db").color=cc.Color.WHITE,e.getChildByName("giftStep").getComponent(cc.Label).string="\u5f00\u5c40\u5956\u52b1"+t.giftStep+"\u6b65"):(e.getChildByName("name").getComponent(cc.Label).string="???",e.getChildByName("giftStep").getComponent(cc.Label).string="\u5f00\u5c40\u5956\u52b1???\u6b65",e.getChildByName("db").color=cc.Color.BLACK),this._controller.scoreMgr.characterMgr.showCharacter(i+1,e.getChildByName("db"),0)}}),cc._RF.pop()},{}],progress:[function(e,t,i){"use strict";cc._RF.push(t,"b6ca61w/99BeLZm6RuqYPHb","progress"),cc.Class({extends:cc.Component,properties:{usualNode:cc.Node,currentLabel:cc.Label,maxLabel:cc.Label,progress:cc.ProgressBar,nameLabel:cc.Label,levelLabel:cc.Label,limitNode:cc.Node,limitScore:cc.Label},init:function(e,t,i){i<15?(this.limitNode.active=!1,this.usualNode.active=!0,this.maxLabel.string=t.score,this.currentLabel.string=e,this.progress.progress=e/t.score,this.levelLabel.string="lv"+i):(this.limitNode.active=!0,this.usualNode.active=!1,this.limitScore.string=e,this.progress.progress=1)}}),cc._RF.pop()},{}],scoreCell:[function(e,t,i){"use strict";cc._RF.push(t,"0c8daIRUMtEXqcHO2bidMh4","scoreCell"),cc.Class({extends:cc.Component,properties:{label:cc.Label},init:function(e,t,i){var o=this;this._score=e,this.node.x=i.x,this.node.y=i.y,this.label.string=t,this.node.scale=1,this.label.node.x=0,this.label.node.y=0,this.label.node.scale=1;var c=cc.scaleTo(.1,1.2,1.2),n=cc.moveBy(.1,0,30),s=cc.moveTo(.2,0,0),a=cc.scaleTo(.2,.5,.5),r=cc.spawn(c,n),h=cc.spawn(s,a),l=cc.sequence(r,h,cc.callFunc(function(){e.scorePool.put(o.node)},this));this.node.runAction(l)}}),cc._RF.pop()},{}],scoreParticle:[function(e,t,i){"use strict";cc._RF.push(t,"b3ac7z+dNhMxry0R3HbylFr","scoreParticle"),cc.Class({extends:cc.Component,properties:{particle:cc.ParticleSystem},init:function(e,t,i){var o=this;this._score=e,this.node.x=t.x,this.node.y=t.y,this.node.active=!0,this.node.scale=1,setTimeout(function(){o.node.active=!1,o.particle.stopSystem()},i/1)}}),cc._RF.pop()},{}],score:[function(e,t,i){"use strict";cc._RF.push(t,"72f7acBwR1I474pejqfLV0j","score");var o=e("action");cc.Class({extends:cc.Component,properties:{scorePrefab:cc.Prefab,scoreParticlePrefab:cc.Prefab,mainScoreLabel:cc.Label,successDialog:e("successDialog"),characterMgr:e("character"),failDialog:cc.Node,multPropPrefab:cc.Prefab,chainSpriteFrameArr:[cc.SpriteFrame],stepAniLabel:cc.Label,tipBox:e("tipBox")},init:function(e){if(this._game=e,this._controller=e._controller,this.score=0,this.leftStep=this._controller.config.json.originStep,this.chain=1,this.level=1,this.reviveTime=0,this.closeMultLabel(),this.levelData=e._controller.gameData.json.levelData,this.nameLabel.string="\u519c\u6c11",this.progressBar.init(0,this.levelData[this.level-1],this.level),this.leftStepLabel.string=this.leftStep,this.stepAniLabel.node.runAction(cc.hide()),this.scoreTimer=[],this.currentAddedScore=0,this.mainScoreLabel.node.active=!1,this.characterMgr.showCharacter(this.level),this.hideChainSprite(),this.tipBox.init(this,0),this._controller.social.node.active){var t=this._controller.social.getHighestLevel();t&&this.onStep(this.levelData[+t-1].giftStep)}},onLoad:function(){this.generatePool(),this.bindNode()},generatePool:function(){this.scorePool=new cc.NodePool;for(var e=0;e<20;e++){var t=cc.instantiate(this.scorePrefab);this.scorePool.put(t)}this.scoreParticlePool=new cc.NodePool;for(var i=0;i<20;i++){var o=cc.instantiate(this.scoreParticlePrefab);this.scoreParticlePool.put(o)}this.multPropPool=new cc.NodePool;for(var c=0;c<3;c++){var n=cc.instantiate(this.multPropPrefab);this.multPropPool.put(n)}},instantiateScore:function(e,t,i){var o=null;(o=e.scorePool&&e.scorePool.size()>0?e.scorePool.get():cc.instantiate(e.scorePrefab)).parent=this.scoreContainer,o.getComponent("scoreCell").init(e,t,i);var c=null;(c=e.scoreParticlePool&&e.scoreParticlePool.size()>0?e.scoreParticlePool.get():cc.instantiate(e.scoreParticlePrefab)).parent=this.scoreContainer,c.getComponent("scoreParticle").init(e,i,this._controller.config.json.scoreParticleTime)},bindNode:function(){this.leftStepLabel=this.node.getChildByName("UI").getChildByName("leftStepNode").getChildByName("Label").getComponent(cc.Label),this.progressBar=this.node.getChildByName("UI").getChildByName("scoreNode").getChildByName("progressBar").getComponent("progress"),this.scoreContainer=this.node.getChildByName("UI").getChildByName("scoreGroup"),this.multLabel=this.mainScoreLabel.node.getChildByName("mult").getComponent(cc.Label),this.nameLabel=this.node.getChildByName("UI").getChildByName("scoreNode").getChildByName("progressBar").getChildByName("name").getComponent(cc.Label),this.chainSprite=this.node.getChildByName("UI").getChildByName("chainSprite").getComponent(cc.Sprite),this.failScore=this.failDialog.getChildByName("info").getChildByName("score").getComponent(cc.Label),this.failName=this.failDialog.getChildByName("info").getChildByName("level").getComponent(cc.Label),this.failSprite=this.failDialog.getChildByName("info").getChildByName("sprite").getComponent(cc.Sprite),this.failHighScore=this.failDialog.getChildByName("info").getChildByName("highScore").getComponent(cc.Label)},onStep:function(e){var t=this;return this.leftStep+=e,new Promise(function(i,o){t.leftStep<0?(t.leftStep=0,t.onGameOver(),i(!1)):i(!0),t.leftStepLabel.string=t.leftStep,e>0&&t.showStepAni(e)})},addScore:function(e,t){var i=this;t=t||this._controller.config.json.scoreBase,this.chainTimer&&clearTimeout(this.chainTimer),this.initCurrentScoreLabel(),this.chainTimer=setTimeout(function(){i.onCurrentScoreLabel(i.currentAddedScore,{x:-60,y:355},cc.callFunc(function(){i.score+=i.currentAddedScore*i.multiple,i.checkLevelUp(),i.chain=1,i.closeMultLabel(),i.hideChainSprite(),i.currentAddedScore=0,i.mainScoreLabel.node.active=!1},i))},500);var o=t==this._controller.config.json.scoreBase?t+10*(this.chain>16?16:this.chain-1):t;this.currentAddedScore+=o,this.mainScoreLabel.string=this.currentAddedScore,this.instantiateScore(this,o,e),this.chain++,this.checkChain()},checkChain:function(){var e=this;this.checkChainTimer&&clearTimeout(this.checkChainTimer),this.checkChainTimer=setTimeout(function(){for(var t=e._controller.config.json.chainConfig,i=0;i<t.length;i++)if(e.chain<=t[i].max&&e.chain>=t[i].min)return void e.showChainSprite(i)},200)},showChainSprite:function(e){this.chainSprite.spriteFrame=this.chainSpriteFrameArr[e],this.chainSprite.node.scale=.5,this.chainSprite.node.active=!0,this.chainSprite.node.runAction(o.popOut(.3))},hideChainSprite:function(){this.chainSprite.node.active=!1},checkLevelUp:function(){this.level<this.levelData.length&&this.score>=this.levelData[this.level-1].score&&(this.level++,this.level>this.levelData.length+1?this.levelLimit():this.onLevelUp()),this.progressBar.init(this.score,this.levelData[this.level-1],this.level)},addMult:function(e,t){this.multiple<this._controller.config.json.maxMultiple&&(this.multiple*=2,this.showMultLabel())},closeMultLabel:function(){this.multiple=1,this.multLabel.node.active=!1},showMultLabel:function(){this.multLabel.node.scale=.5,this.multLabel.string=this.multiple,this.multLabel.node.active=!0,this.multLabel.node.runAction(o.popOut(.3))},initCurrentScoreLabel:function(){this.mainScoreLabel.node.active=!0,this.mainScoreLabel.node.x=0,this.mainScoreLabel.node.y=0,this.mainScoreLabel.node.scale=1},onCurrentScoreLabel:function(e,t,i){this.mainScoreLabel.string=e;var o=cc.spawn(cc.moveTo(.2,t.x,t.y),cc.scaleTo(.2,.4)).easing(cc.easeBackOut()),c=cc.sequence(o,i);this.mainScoreLabel.node.runAction(c)},onLevelUp:function(){this._controller.pageMgr.addPage(2),this._controller.pageMgr.addPage(3),this._controller.musicMgr.onWin(),this.successDialog.init(this,this.level,this.levelData,this.score),this.characterMgr.onLevelUp(),this.characterMgr.onSuccessDialog(this.level),this._game._status=2,this._controller.social.node.active&&this._controller.social.openBannerAdv()},levelLimit:function(){this.hideNextLevelData()},onLevelUpButton:function(e){var t=this;console.log(e),this.isLevelUp||(this.isLevelUp=!0,setTimeout(function(){t.isLevelUp=!1},500),e=e&&e.currentTarget?1:e||1,this._controller.pageMgr.onOpenPage(1),this.initCurrentScoreLabel(),this.mainScoreLabel.string=this.levelData[this.level-2].step*e,this.characterMgr.onLevelUpBtn(this.level),this.nameLabel.string=this.levelData[this.level-1].name,setTimeout(function(){t.onCurrentScoreLabel(t.levelData[t.level-2].step*e,{x:-248,y:350},cc.callFunc(function(){t.onStep(t.levelData[t.level-2].step*e).then(),t._game._status=1,t.mainScoreLabel.node.active=!1}))},300),this.showNextLevelData(),this.checkLevelUp())},showStepAni:function(e){this.stepAniLabel.string="+"+e,this.stepAniLabel.node.x=-248,this.stepAniLabel.node.y=400,this.stepAniLabel.node.runAction(cc.sequence(cc.toggleVisibility(),cc.moveBy(.6,0,60),cc.toggleVisibility()));var t=cc.sequence(cc.scaleTo(.2,.8),o.popOut(.8));this.leftStepLabel.node.parent.runAction(t)},onGameOver:function(e){e=e||0,3!=this._game._status&&(e||this.reviveTime>=3)?(this._game.gameOver(),this.updateFailPage(),this._controller.social.node.active&&this._controller.social.onGameOver(this.level,this.score)):e||this._game.askRevive()},onDoubleStepBtn:function(){this._controller.social.node.active?this._controller.social.onReviveButton(0):this.onLevelUpButton(2)},onDoubleStep:function(){this.onLevelUpButton(2)},onRevive:function(){this.reviveTime+=1,this.onStep(5).then()},showNextLevelData:function(){this.levelData[this.level]},hideNextLevelData:function(){},updateFailPage:function(){this.failScore.string=" "+this.score,this.characterMgr.onFail(this.level),this.failName.string=this.levelData[this.level-1].name}}),cc._RF.pop()},{action:"action",character:"character",successDialog:"successDialog",tipBox:"tipBox"}],social:[function(e,t,i){"use strict";cc._RF.push(t,"53b05czD4xGgZ8D0pLpUj9M","social"),cc.Class({extends:cc.Component,properties:{display:cc.Sprite,groupDisplay:cc.Sprite,_isShow:!1},isSharing:!1,init:function(e){var t=this;this._controller=e,wx.showShareMenu({withShareTicket:!0}),wx.onShareAppMessage(function(){return{title:"\u5f00\u5c40\u53ea\u662f\u4e2a\u519c\u6c11\uff0c\u73b0\u5728\u5df2\u7ecf\u505a\u5230\u5bb0\u76f8",imageUrl:"https://mmocgame.qpic.cn/wechatgame/LtJZOjH6Z9ibiaMlpqzldsOf46Q7TZiaysI1fwc4Oj1L3CkbCaJMAMoicibbHu2HUQkOib/0"}}),wx.onAudioInterruptionEnd(function(){e.musicMgr.pauseBg(),e.musicMgr.resumeBg()}),wx.onShow(function(i){1044==i.scene&&(wx.postMessage({message:"group",shareTicket:i.shareTicket}),e.openGroupRank(),t.display.node.active=!1,e.totalRank.active=!1),cc.director.resume()}),wx.onHide(function(){cc.director.pause()}),this.getHighestLevel()},onItemShareSuccess:function(){this.hasShared=!0,this._controller.game.fakeShareSuccess()},getHighestLevel:function(){return wx.getStorageSync("highLevel")},getHighestScore:function(){return wx.getStorageSync("highScore")},onShareButton:function(){wx.shareAppMessage({title:"\u6211\u7ec8\u4e8e\u5f53\u4e0a\u4e86"+this._controller.scoreMgr.levelData[this._controller.scoreMgr.level-1].name+",\u4e0d\u670d\u6765\u6218",imageUrl:"https://mmocgame.qpic.cn/wechatgame/LtJZOjH6Z9ibiaMlpqzldsOf46Q7TZiaysI1fwc4Oj1L3CkbCaJMAMoicibbHu2HUQkOib/0"})},onUsualShareButton:function(){wx.shareAppMessage({title:"\u5f00\u5c40\u53ea\u662f\u4e2a\u519c\u6c11\uff0c\u73b0\u5728\u5df2\u7ecf\u505a\u5230\u5bb0\u76f8",imageUrl:"https://mmocgame.qpic.cn/wechatgame/LtJZOjH6Z9ibiaMlpqzldsOf46Q7TZiaysI1fwc4Oj1L3CkbCaJMAMoicibbHu2HUQkOib/0"})},onItemShareButton:function(){this.hasShared||(this.isSharing=!0,wx.shareAppMessage({title:"\u5f00\u5c40\u53ea\u662f\u4e2a\u519c\u6c11\uff0c\u73b0\u5728\u5df2\u7ecf\u505a\u5230\u5bb0\u76f8",imageUrl:"https://mmocgame.qpic.cn/wechatgame/LtJZOjH6Z9ibiaMlpqzldsOf46Q7TZiaysI1fwc4Oj1L3CkbCaJMAMoicibbHu2HUQkOib/0"}))},onShakePhone:function(){wx.vibrateShort()},onGameOver:function(e,t){this.score=t;var i=e,o=t;i=wx.getStorageSync("highLevel"),i=(i=parseInt(i))?i<e?e:i:e,o=(o=wx.getStorageSync("highScore"))?(o=parseInt(o))<t?t:o:t;var c=this._controller.gameData.json.levelData[i-1].name;wx.setStorageSync("highLevel",i+""),wx.setStorageSync("highScore",o+""),this._controller.scoreMgr.failHighScore.string="\u60a8\u7684\u6700\u9ad8\u5206:"+o;var n=new Array;n.push({key:"highLevel",value:c},{key:"highScore",value:o+""}),wx.setUserCloudStorage({KVDataList:n,success:function(){},fail:function(e){}})},showRank:function(){wx.postMessage({message:"Show"}),this.display.node.active=!0,this._isShow=!0},closeRank:function(){this.display.node.active=!1,wx.postMessage({message:"Hide"}),this._isShow=!1},showGroupRank:function(){wx.postMessage({message:"Show"}),this.groupDisplay.node.active=!0,this._isShow=!0},closeGroupRank:function(){this.groupDisplay.node.active=!1,wx.postMessage({message:"Hide"}),this._isShow=!1},createImage:function(e,t){var i=wx.createImage();i.onload=function(){var t=new cc.Texture2D;t.initWithElement(i),t.handleLoadedTexture(),e.spriteFrame=new cc.SpriteFrame(t)},i.src=t},update:function(){this._isShow&&(this.display.node.active&&this.display.node.getComponent(cc.WXSubContextView).update(),this.groupDisplay.node.active&&this.groupDisplay.node.getComponent(cc.WXSubContextView).update())},onReviveButton:function(e){var t=this,i=this;this.adType=e,this.audioAd?this.audioAd.show().catch(function(){t.audioAd.load().then(function(){return t.audioAd.show()}).catch(function(e){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u5931\u8d25",e.errMsg),1==i.adType?i._controller.game.onSkipRevive():2==i.adType?i._controller.scoreMgr.onLevelUpButton():i.onItemShareSuccess()})}):(this.audioAd=wx.createRewardedVideoAd({adUnitId:"adunit-482148cfeb243378"}),this.audioAd.show().catch(function(){t.audioAd.load().then(function(){return t.audioAd.show()}).catch(function(e){i.fakeShare()})}),this.audioAd.onError(function(e){i.fakeShare()}),this.audioAd.onClose(function(e){1==i.adType?e&&e.isEnded||void 0===e?i._controller.game.showReviveSuccess():i._controller.game.askRevive():0==i.adType?(e&&e.isEnded||void 0===e)&&i._controller.scoreMgr.onLevelUpButton(2):(e&&e.isEnded||void 0===e)&&i.onItemShareSuccess()}))},fakeShare:function(){wx.shareAppMessage({title:"\u6211\u5df2\u7ecf\u73a9\u5230"+this._controller.scoreMgr.score+"\u5206\u4e86\uff0c\u9080\u8bf7\u4f60\u6765\u6311\u6218",imageUrl:"https://mmocgame.qpic.cn/wechatgame/LtJZOjH6Z9ibiaMlpqzldsOf46Q7TZiaysI1fwc4Oj1L3CkbCaJMAMoicibbHu2HUQkOib/0"}),this.adType?this._controller.game.showReviveSuccess():this._controller.scoreMgr.onLevelUpButton(2)},openBannerAdv:function(){},navToMiniprogram:function(e,t){console.log(t),wx.navigateToMiniProgram({appId:t})},closeBannerAdv:function(){this.bannerAd&&this.bannerAd.hide()}}),cc._RF.pop()},{}],startPage:[function(e,t,i){"use strict";cc._RF.push(t,"b55a72WBPhBorvnSW4KT5tu","startPage"),cc.Class({extends:cc.Component,properties:{bannerNode:cc.Node,labelNode:cc.Node},start:function(){},onTouched:function(){},showAnimation:function(){var e=this;return new Promise(function(t,i){var o=cc.scaleTo(.5,0,0).easing(cc.easeBackIn()),c=cc.blink(.5,3);e.bannerNode.runAction(o);var n=cc.sequence(c,cc.callFunc(function(){t()}));e.labelNode.runAction(n)})}}),cc._RF.pop()},{}],successDialog:[function(e,t,i){"use strict";cc._RF.push(t,"f784aHXFKRDvbVWsOUPoQIK","successDialog"),cc.Class({extends:cc.Component,properties:{nameLabelBefore:cc.Label,nameLabelNow:cc.Label,stepLabel:cc.Label,scoreLabel:cc.Label},init:function(e,t,i,o){this.nameLabelBefore.string=i[t-2].name,this.nameLabelNow.string=i[t-1].name,this.stepLabel.string="+"+i[t-2].step+"\u6b65",this.scoreLabel.string="\u5206\u6570\uff1a"+o}}),cc._RF.pop()},{}],tipBox:[function(e,t,i){"use strict";cc._RF.push(t,"25720Je1mZOOb7eOx8qoRZt","tipBox"),cc.Class({extends:cc.Component,properties:{label:cc.Label,tipLabel:cc.Label},start:function(){this.tip=["\u4e00\u6b21\u6027\u5927\u91cf\u6d88\u9664\u53ef\u83b7\u5f97\u9053\u5177!","X2\u9053\u5177\u53ef\u4ee5\u7ffb\u500d\u4e00\u6b21\u6d88\u9664\u7684\u5206\u6570","\u70b8\u5f39\u9053\u5177\u53ef\u4ee5\u6d88\u9664\u5168\u5c4f\u540c\u8272\u65b9\u5757","\u5355\u4e2a\u65b9\u5757\u65e0\u6cd5\u6d88\u9664\u54e6","\u70b8\u5f39\u9053\u5177\u53ef\u4ee5\u6d88\u9664\u5168\u5c4f\u540c\u8272\u65b9\u5757","\u4ed9\u5973\u68d2\u53ef\u4ee5\u6d88\u9664\u6240\u6709\u5355\u4e2a\u65b9\u5757"],this.otherTip=["\u957f\u98ce\u7834\u6d6a\u4f1a\u6709\u65f6\uff0c\u76f4\u6302\u4e91\u5e06\u6d4e\u6ca7\u6d77","\u9ec4\u6c99\u767e\u6218\u7a7f\u91d1\u7532\uff0c\u4e0d\u7834\u697c\u5170\u7ec8\u4e0d\u8fd8","\u7eb8\u4e0a\u5f97\u6765\u7ec8\u89c9\u6d45\uff0c\u7edd\u77e5\u6b64\u4e8b\u8981\u8eac\u884c","\u541b\u5b50\u5766\u8361\u8361\uff0c\u5c0f\u4eba\u957f\u621a\u621a","\u7a77\u5219\u72ec\u5584\u5176\u8eab\uff0c\u8fbe\u5219\u517c\u6d4e\u5929\u4e0b","\u76db\u5e74\u4e0d\u91cd\u6765\uff0c\u4e00\u65e5\u96be\u518d\u6668","\u4eba\u751f\u82e5\u53ea\u5982\u521d\u89c1\uff0c\u4f55\u4e8b\u79cb\u98ce\u60b2\u753b\u6247","\u884c\u5230\u6c34\u7a77\u5904\uff0c\u5750\u770b\u4e91\u8d77\u65f6","\u5929\u751f\u6211\u6750\u5fc5\u6709\u7528\uff0c\u5343\u91d1\u6563\u5c3d\u8fd8\u590d\u6765","\u5927\u9e4f\u4e00\u65e5\u540c\u98ce\u8d77\uff0c\u6276\u6447\u76f4\u4e0a\u4e5d\u4e07\u91cc","\u9065\u671b\u9f50\u5dde\u4e5d\u70b9\u70df\uff0c\u4e00\u6cd3\u6d77\u6c34\u676f\u4e2d\u6cfb","\u4eba\u4e16\u51e0\u56de\u4f24\u5f80\u4e8b\uff0c\u5c71\u5f62\u4f9d\u65e7\u6795\u5bd2\u6d41","\u4f46\u4f7f\u9f99\u57ce\u98de\u5c06\u5728\uff0c\u4e0d\u6559\u80e1\u9a6c\u5ea6\u9634\u5c71","\u5341\u5e74\u4e00\u89c9\u626c\u5dde\u68a6\uff0c\u8d62\u5f97\u9752\u697c\u8584\u5e78\u540d","\u6ca7\u6d77\u6708\u660e\u73e0\u6709\u6cea\uff0c\u84dd\u7530\u65e5\u6696\u7389\u751f\u70df","\u4e16\u95f4\u65e0\u9650\u4e39\u9752\u624b\uff0c\u4e00\u7247\u4f24\u5fc3\u753b\u4e0d\u6210","\u7537\u513f\u4f55\u4e0d\u5e26\u5434\u94a9\uff0c\u6536\u53d6\u5173\u5c71\u4e94\u5341\u5dde","\u82df\u5229\u56fd\u5bb6\u751f\u6b7b\u4ee5\uff0c\u5c82\u56e0\u7978\u798f\u907f\u8d8b\u4e4b","\u591c\u9611\u5367\u542c\u98ce\u5439\u96e8\uff0c\u94c1\u9a6c\u51b0\u6cb3\u5165\u68a6\u6765","\u4eba\u751f\u81ea\u53e4\u8c01\u65e0\u6b7b\uff1f\u7559\u53d6\u4e39\u5fc3\u7167\u6c57\u9752"]},onLoad:function(){var e=this;setInterval(function(){e.tipLabel.string=e.tip?"tip:"+e.tip[Math.floor(Math.random()*e.tip.length)]:""},1e4)},init:function(e,t){var i=this;this._score=e,this.label.string=t>0?this.tip[t]:this.otherTip[Math.floor(Math.random()*this.otherTip.length)],this.openTipBox(),this.gapTimer&&clearInterval(this.gapTimer),this.gapTimer=setInterval(function(){i.init(i._score,-1)},5e3)},openTipBox:function(){var e=this;if(!this.isOpen){var t=cc.scaleTo(.3,1).easing(cc.easeBackOut(2)),i=cc.sequence(t,cc.callFunc(function(){e.isOpen=!0}));this.node.runAction(i)}this.closeTimer&&clearTimeout(this.closeTimer),this.closeTimer=setTimeout(function(){e.closeTioBox()},4e3)},closeTioBox:function(){var e=this,t=cc.scaleTo(.3,0),i=cc.sequence(t,cc.callFunc(function(){e.isOpen=!1}));this.node.runAction(i)}}),cc._RF.pop()},{}]},{},["action","building","cell","character","check","controller","game","musicMgr","pageMgr","pictorial","progress","score","scoreCell","scoreParticle","social","startPage","successDialog","tipBox"]);